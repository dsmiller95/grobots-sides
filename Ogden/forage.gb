#side Forage
#author Ogden
#color 029

#type Forager

#hardware
  engine 0.08
  constructor 1.5
  eater 2
  energy 250 25
  food-sensor 8 1
  robot-sensor 8 1
  processor 10
  armor 150
  blaster 30 7 15
  repair-rate 0.3
  
#code
#var directionx
#var directiony
#start
do
  ; make new
  constructor-progress nif
    1 constructor-type!
  then
  energy max-energy 0.5 * >= if
    constructor-max-rate constructor-rate!
  else
    0 constructor-rate!
  then
  
  ; seek food
  44 periodic-food-sensor drop
  food-found if
    food-position seek-location
    0 world-width random 0 world-height random directiony! directionx!
  else
    engine-power nif
      0 world-width random 0 world-height random directiony! directionx!
    then
    directionx directiony seek-location
  then
  
  ; attac
  blaster-reload-time periodic-robot-sensor drop
  robot-found if
    robot-position robot-velocity lead-blaster
  then
  
  ; protec
  energy max-energy 0.8 * >= armor max-armor = not and if
    max-repair-rate repair-rate!
  else
    0 repair-rate!
  then
  
forever

#end